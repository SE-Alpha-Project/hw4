grep -l "sample" dataset1/* | xargs -I {} sh -c 'count=$(grep -o "CSC510" {} | wc -l); if [ "$count" -ge 3 ]; then size=$(stat -c%s {}); echo "$count $size {}"; fi' | sort -k1,1nr -k2,2n | while read count size file; do echo "${file/file_/filtered_}"; done
